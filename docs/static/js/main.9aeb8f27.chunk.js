(this["webpackJsonpsimple-card-game"]=this["webpackJsonpsimple-card-game"]||[]).push([[0],[,,,function(e,t,c){"use strict";var r=c(7);c.d(t,"initialAppState",(function(){return r.a}));var n=c(5);c.d(t,"actions",(function(){return n}));var a=c(17);c.d(t,"reducer",(function(){return a.a}));c(18)},,function(e,t,c){"use strict";c.r(t),c.d(t,"SET_CARDS_PRELOADED",(function(){return r})),c.d(t,"SET_LEFT_SIDE_SELECTION",(function(){return n})),c.d(t,"INCREASE_LEFT_SCORE",(function(){return a})),c.d(t,"SET_RIGHT_SIDE_SELECTION",(function(){return i})),c.d(t,"INCREASE_RIGHT_SCORE",(function(){return s})),c.d(t,"SET_ROUND_WINNER",(function(){return o})),c.d(t,"TOGGLE_CARD_REVEALED",(function(){return d})),c.d(t,"TOGGLE_FULL_AUTOPLAY",(function(){return l})),c.d(t,"SET_GAME_OVER",(function(){return u})),c.d(t,"RESTART",(function(){return f}));var r="SET_CARDS_PRELOADED",n="SET_LEFT_SIDE_SELECTION",a="INCREASE_LEFT_SCORE",i="SET_RIGHT_SIDE_SELECTION",s="INCREASE_RIGHT_SCORE",o="SET_ROUND_WINNER",d="TOGGLE_CARD_REVEALED",l="TOGGLE_FULL_AUTOPLAY",u="SET_GAME_OVER",f="RESTART"},,function(e,t,c){"use strict";var r={},n={cardsPreloaded:!1,leftSide:r,leftScore:0,rightSide:r,rightScore:0,fullAutoPlay:!1,cardsRevealed:!1,gameOver:!1};t.a=n},,,,,,,function(e){e.exports=JSON.parse('{"name":"simple-card-game","version":"0.1.14","private":false,"homepage":"https://nikuz.github.io/simple-card-game","dependencies":{"classnames":"^2.2.6","react":"^17.0.1","react-dom":"^17.0.1","react-scripts":"4.0.1","react-transition-group":"^4.4.1","typescript":"^4.1.3","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build && rm -rf docs && mv build docs","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"],"rules":{"semi":"error","indent":["error",4,{"SwitchCase":1}],"object-shorthand":["error"],"quotes":["error","single"],"quote-props":["error","as-needed"],"no-param-reassign":"error"}},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@testing-library/jest-dom":"^5.11.6","@testing-library/react":"^11.2.2","@testing-library/user-event":"^12.6.0","@types/classnames":"^2.2.11","@types/jest":"^26.0.19","@types/node":"^12.19.9","@types/react":"^16.14.2","@types/react-dom":"^16.9.10","@types/react-transition-group":"^4.4.0"}}')},,,function(e,t,c){"use strict";c.d(t,"a",(function(){return i}));var r=c(2),n=c(7),a=c(5);function i(e,t){switch(t.type){case a.SET_CARDS_PRELOADED:return Object(r.a)(Object(r.a)({},e),{},{cardsPreloaded:t.payload});case a.SET_LEFT_SIDE_SELECTION:return Object(r.a)(Object(r.a)({},e),{},{leftSide:t.payload});case a.INCREASE_LEFT_SCORE:return Object(r.a)(Object(r.a)({},e),{},{leftScore:e.leftScore+1});case a.SET_RIGHT_SIDE_SELECTION:return Object(r.a)(Object(r.a)({},e),{},{rightSide:t.payload});case a.INCREASE_RIGHT_SCORE:return Object(r.a)(Object(r.a)({},e),{},{rightScore:e.rightScore+1});case a.SET_ROUND_WINNER:return Object(r.a)(Object(r.a)({},e),{},{roundWinner:t.payload,leftSide:t.payload?e.leftSide:n.a.leftSide,rightSide:t.payload?e.rightSide:n.a.rightSide});case a.TOGGLE_CARD_REVEALED:return Object(r.a)(Object(r.a)({},e),{},{cardsRevealed:!e.cardsRevealed});case a.TOGGLE_FULL_AUTOPLAY:return Object(r.a)(Object(r.a)({},e),{},{fullAutoPlay:!e.fullAutoPlay});case a.SET_GAME_OVER:return Object(r.a)(Object(r.a)({},e),{},{gameOver:!0});case a.RESTART:return Object(r.a)(Object(r.a)({},e),{},{leftScore:0,rightScore:0,gameOver:!1});default:throw new Error}}},function(e,t){},,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var r,n,a,i,s=c(0),o=c(1),d=c.n(o),l=c(6),u=c.n(l),f=(c(25),c(12)),h=c(4),j=c.n(h),b=c.p+"static/media/loading.4f271669.svg";!function(e){e.red="red",e.green="green",e.blue="blue",e.yellow="yellow",e.gray="gray",e.purple="purple"}(r||(r={})),function(e){e.left="left",e.right="right"}(n||(n={})),function(e){e.left="left",e.right="right",e.draw="draw"}(a||(a={})),function(e){e.small="small",e.big="big",e.flexible="flexible"}(i||(i={}));c(26);function O(e){var t=j()("loading-icon",{small:e.size===i.small,big:e.size===i.big},e.className);return Object(s.jsx)("img",{src:b,alt:"",className:t})}var E=c(15),p=c(11),m=c(14),v=function e(t){Object(p.a)(this,e),this.rank=void 0,this.rankId=void 0,this.id=void 0,this.front=void 0,this.back=void 0,this.color=void 0,this.id=t.id,this.rank=t.rank,this.rankId=t.rankId,this.front="/".concat(m.name,"/cards/").concat(t.id,".png"),this.back="/".concat(m.name,"/cards/").concat(t.color,"_back.png"),this.color=t.color},g=108,S=1.777;var x=window.innerWidth,_=window.innerHeight;window.addEventListener("resize",(function(){x=window.innerWidth,_=window.innerHeight}));var R=function(e){return e*Math.min(x/192,_/g)},T=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],N=["C","D","H","S"],y=function e(t){var c=this;Object(p.a)(this,e),this.cards=[],this.cardsInDeck=[],this.populateRank=function(e,t){for(var r=0,n=N.length;r<n;r++){var a="".concat(T[e]).concat(N[r]);c.cards.push(new v({rank:e,rankId:T[e],id:a,color:t}))}},this.shuffle=function(){c.cardsInDeck=function(e){for(var t,c=[],r=e.length;r;)(t=Math.floor(Math.random()*e.length))in e&&(c.push(e[t]),delete e[t],r--);return c}(c.cardsInDeck)},this.pullCardByIndex=function(e){return e<0||e>c.cardsInDeck.length?null:c.cardsInDeck.splice(e,1)[0]||null},this.pullCardById=function(e){var t=c.cardsInDeck.findIndex((function(t){return t.id===e}));return-1!==t&&c.cardsInDeck.splice(t,1)[0]||null},this.collect=function(){c.cardsInDeck=Object(E.a)(c.cards),c.shuffle()};for(var r=0,n=T.length;r<n;r++)this.populateRank(r,t);this.cardsInDeck=Object(E.a)(this.cards),this.shuffle()};c(27);function C(e){var t=e.colors,c=e.onLoading,r=Object(o.useRef)(new y(t[0])),n=Object(o.useRef)(new y(t[1])),a=r.current.cards,i=Object(o.useState)(0),d=Object(f.a)(i,2),l=d[0],u=d[1],h=a.length+2;Object(o.useEffect)((function(){l===h&&c()}),[l,h,c]);var j=Object(o.useCallback)((function(){u(l+1)}),[l]),b=Math.round(l/(h/100));return Object(s.jsxs)("div",{className:"preloader-container blocker",children:[Object(s.jsx)(O,{}),Object(s.jsxs)("div",{className:"pc-progress",children:[b||0,"%"]}),Object(s.jsxs)("div",{className:"preloader-deck",children:[a.map((function(e){return Object(s.jsx)(I,{src:e.front,onLoad:j,onError:c},e.id)})),Object(s.jsx)(I,{src:a[0].back,onLoad:j,onError:c}),Object(s.jsx)(I,{src:n.current.cards[0].back,onLoad:j,onError:c})]})]})}function I(e){return Object(s.jsx)("img",{src:e.src,className:"pcd-card",alt:"",onLoad:e.onLoad,onError:e.onError})}var k=c(2);c(28);function w(e){if(""===e.id)return null;var t=j()("cc-image",{small:e.size===i.small,big:e.size===i.big,flexible:e.size===i.flexible});return Object(s.jsx)("div",{className:"card-container",children:Object(s.jsx)("img",{src:e.open?e.front:e.back,className:t,alt:""})})}c(29);function L(e){var t,c=e.autoPlay,r=e.disabled,n=e.list,a=e.side,i=j()("deck-container","dc-".concat(a),{disabled:r}),o=98/(n.length-1),d=parseInt(function(e,t){var c=[];if(!document.documentElement)return c;var r=getComputedStyle(t||document.documentElement);return e.forEach((function(e){c.push(r.getPropertyValue("--".concat(e)))})),c}(["hover-padding"])[0],10);return c&&!r&&(t=Math.floor(Math.random()*n.length)),Object(s.jsxs)("div",{className:i,children:[n.map((function(c,n){return Object(s.jsx)(D,{side:a,card:c,autoPlay:n===t,revealed:e.revealed,disabled:r,position:n*o,padding:d||0,onClick:function(t){e.onCardChoose(a,c.id,t)}},c.id)})),r&&Object(s.jsx)("div",{className:"blocker"})]})}function D(e){var t=e.autoPlay,c=e.revealed,r=e.disabled,a=e.onClick,d=e.padding,l=e.side,u=Object(o.useRef)(null),f=Object(o.useCallback)((function(){if(null!==u.current){var e=u.current,t=e.offsetLeft;l===n.right&&(t-=R(d));var c={top:e.offsetTop-R(2.65),left:t,width:e.offsetWidth,height:e.offsetHeight};a(c)}}),[u,d,l,a]);return Object(o.useEffect)((function(){var e=setTimeout((function(){t&&!r&&f()}),10);return function(){return clearTimeout(e)}}),[t,r,f]),Object(s.jsx)("div",{ref:u,className:"dc-item",style:{top:"".concat(e.position,"rem"),transform:"translate(-50%, -".concat(2.65,"rem) rotate(-90deg)")},onClick:function(){t||f()},children:Object(s.jsx)(w,Object(k.a)(Object(k.a)({},e.card),{},{open:c,size:i.small}))})}var A=c(9),G=c(41);c(30);function P(e){var t=e.leftSide,c=e.rightSide,r=e.roundWinner,a=e.onClear,i=Object(o.useRef)(null);return Object(o.useEffect)((function(){var e=setTimeout((function(){r&&a(r)}),500);return function(){return clearTimeout(e)}}),[r,a]),Object(s.jsxs)("div",{className:"table-container",ref:i,children:[Object(s.jsx)(z,{side:n.left,card:t.card,rect:t.rect,wrapper:i.current,zIndex:2,roundWinner:r}),Object(s.jsx)(z,{side:n.right,card:c.card,rect:c.rect,wrapper:i.current,zIndex:1,roundWinner:r})]})}function z(e){var t,c=d.a.useRef(null),r=e.side,a=e.card,o=e.wrapper,l=e.roundWinner,u=e.rect,f={};if(u&&null!==o){var h=u.left;r===n.left?h-=o.offsetLeft:r===n.right&&(h+=o.offsetWidth),f={top:u.top-o.offsetTop,left:h,width:u.width,height:u.height}}var b=j()("tc-card-container",(t={},Object(A.a)(t,"tc-".concat(r,"-card"),r),Object(A.a)(t,"tc-winner-".concat(l),l),t));return Object(s.jsx)(G.a,{in:a&&!l,nodeRef:c,unmountOnExit:!0,timeout:500,classNames:"tccc-wrapper",children:Object(s.jsx)("div",{ref:c,className:b,style:Object(k.a)(Object(k.a)({},f),{},{zIndex:e.zIndex}),children:Object(s.jsxs)("div",{className:"tccc-inner",children:[Object(s.jsx)("div",{className:"rccc-front",children:a&&Object(s.jsx)(w,Object(k.a)(Object(k.a)({},a),{},{size:i.flexible}))}),Object(s.jsx)("div",{className:"rccc-back",children:a&&Object(s.jsx)(w,Object(k.a)(Object(k.a)({},a),{},{open:!0,size:i.flexible}))})]})})})}c(33);function W(e){var t=Object(o.useRef)(null),c=j()("resizable-container",e.className);return Object(o.useLayoutEffect)((function(){var e=function(){!function(e){var t=document.documentElement;if(e&&t){var c=window.innerWidth,r=window.innerHeight,n=c/r,a={width:c,height:r};n<S?a.width=r*S:n>2&&(a.width=2*r),a.width>c&&(a.width=c,a.height=c/S),Object.keys(a).forEach((function(t){"width"!==t&&"height"!==t||e.style.setProperty(t,"".concat(a[t],"px"))}));var i=Math.min(c/192,r/g);t.style.fontSize="".concat(i,"px")}}(t.current)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(s.jsx)("div",{ref:t,className:c,children:e.children})}c(34);function F(e){return Object(s.jsx)("button",{type:"button",className:j()("button",e.className),onClick:e.onClick,children:e.text})}c(35);function H(e){return u.a.createPortal(Object(s.jsxs)(W,{className:"overlay",children:[Object(s.jsx)("div",{className:"blocker"}),Object(s.jsxs)("div",{className:"overlay-content",children:[Object(s.jsx)("h1",{className:"overlay-title",children:e.title}),Object(s.jsx)("p",{className:"overlay-text",children:e.text}),Object(s.jsx)(F,{text:e.buttonText,onClick:e.onClick})]})]}),document.body)}c(36);function U(e){var t=j()("switch-container",e.className);return Object(s.jsxs)("label",{className:t,children:[Object(s.jsxs)("div",{className:"switch",children:[Object(s.jsx)("input",{type:"checkbox",onChange:function(t){e.onChange(t.target.checked)}}),Object(s.jsx)("span",{className:"slider"})]}),Object(s.jsx)("p",{className:"switch-text",children:e.text})]})}var M=c(3);c(37);function V(e){return Object(s.jsxs)("div",{className:"header-container",children:[Object(s.jsx)("div",{className:"hc-score hcs-left",children:e.leftScore}),Object(s.jsx)(U,{text:"Reveal cards",className:"hc-switch",onChange:function(){e.dispatch({type:M.actions.TOGGLE_CARD_REVEALED})}}),Object(s.jsx)(U,{text:"Autoplay",className:"hc-switch",onChange:function(){e.dispatch({type:M.actions.TOGGLE_FULL_AUTOPLAY})}}),Object(s.jsx)("div",{className:"hc-score hcs-right",children:e.rightScore})]})}c(38);var B=r.green,J=r.red;function Y(){var e=Object(o.useRef)(new y(B)),t=Object(o.useRef)(new y(J)),c=Object(o.useReducer)(M.reducer,M.initialAppState),r=Object(f.a)(c,2),i=r[0],d=r[1],l=i.leftSide,u=i.leftScore,h=i.rightSide,j=i.rightScore,b=i.roundWinner,O=i.fullAutoPlay,E=i.cardsRevealed,p=i.gameOver,m=Object(o.useCallback)((function(c,r,a){if(c===n.left){var i=e.current.pullCardById(r);i&&d({type:M.actions.SET_LEFT_SIDE_SELECTION,payload:{card:i,rect:a}})}else{var s=t.current.pullCardById(r);s&&d({type:M.actions.SET_RIGHT_SIDE_SELECTION,payload:{card:s,rect:a}})}}),[]),v=Object(o.useCallback)((function(e){switch(e){case a.left:d({type:M.actions.INCREASE_LEFT_SCORE});break;case a.right:d({type:M.actions.INCREASE_RIGHT_SCORE})}d({type:M.actions.SET_ROUND_WINNER})}),[]),g=Object(o.useCallback)((function(){d({type:M.actions.RESTART}),e.current.collect(),t.current.collect()}),[]);if(Object(o.useEffect)((function(){var e=setTimeout((function(){var e;l.card&&h.card&&(e=l.card.rank>h.card.rank?a.left:l.card.rank<h.card.rank?a.right:a.draw,d({type:M.actions.SET_ROUND_WINNER,payload:e}))}),1e3);return function(){return clearTimeout(e)}}),[l.card,h.card,u,j]),Object(o.useEffect)((function(){b||0!==e.current.cardsInDeck.length||0!==t.current.cardsInDeck.length||d({type:M.actions.SET_GAME_OVER})}),[b]),!i.cardsPreloaded)return Object(s.jsx)(W,{className:"app-container",children:Object(s.jsx)(C,{colors:[B,J],onLoading:function(){return d({type:M.actions.SET_CARDS_PRELOADED,payload:!0})}})});var S,x,_="";p&&(u>j?(S=a.left,x=u):u<j&&(S=a.right,x=j),_=S?"".concat(S," player wins with score ").concat(x):"The game ended in a draw");return Object(s.jsxs)(W,{className:"app-container",children:[Object(s.jsx)(V,{leftScore:u,rightScore:j,dispatch:d}),Object(s.jsx)(L,{autoPlay:O,revealed:E,side:n.left,disabled:!!l.card,list:e.current.cardsInDeck,onCardChoose:m}),Object(s.jsx)(P,{leftSide:l,rightSide:h,onClear:v,roundWinner:b}),Object(s.jsx)(L,{autoPlay:!0,side:n.right,disabled:!!h.card,list:t.current.cardsInDeck,onCardChoose:m}),p&&Object(s.jsx)(H,{title:"Game Over",text:_,buttonText:"Restart",onClick:g})]})}var q=function(e){e instanceof Function&&c.e(3).then(c.bind(null,42)).then((function(t){var c=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),r(e),n(e),a(e),i(e)}))};u.a.render(Object(s.jsx)(d.a.StrictMode,{children:Object(s.jsx)(Y,{})}),document.getElementById("root")),q()}],[[39,1,2]]]);
//# sourceMappingURL=main.9aeb8f27.chunk.js.map