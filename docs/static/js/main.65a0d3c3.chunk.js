(this["webpackJsonpsimple-card-game"]=this["webpackJsonpsimple-card-game"]||[]).push([[0],{19:function(e,t,c){},20:function(e,t,c){},21:function(e,t,c){},22:function(e,t,c){},25:function(e,t,c){},26:function(e,t,c){},27:function(e,t,c){},28:function(e,t,c){},29:function(e,t,c){},30:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(1),a=c.n(r),i=c(5),s=c.n(i),o=(c(19),c(2)),d=c(4),l=c(3),u=c.n(l);c(20);function f(e){if(""===e.id)return null;var t=u()("cc-image",{small:"small"===e.size,big:"big"===e.size,flexible:"flexible"===e.size});return Object(n.jsx)("div",{className:"card-container",children:Object(n.jsx)("img",{src:e.open?e.front:e.back,className:t,alt:""})})}var h=108,j=1.777;var b=window.innerWidth,O=window.innerHeight;window.addEventListener("resize",(function(){b=window.innerWidth,O=window.innerHeight}));var v=function(e){return e*Math.min(b/192,O/h)};c(21);function x(e){var t,c=e.autoPlay,r=e.disabled,a=e.list,i=e.side,s=u()("deck-container","dc-".concat(i),{disabled:r}),d=98/(a.length-1),l=function(e){var t=[];if(!document.documentElement)return t;var c=getComputedStyle(document.documentElement);return e.forEach((function(e){t.push(c.getPropertyValue("--".concat(e)))})),t}(["hover-padding"]),f=Object(o.a)(l,1)[0];return c&&!r&&(t=Math.floor(Math.random()*a.length)),Object(n.jsxs)("div",{className:s,children:[a.map((function(c,a){return Object(n.jsx)(g,{side:i,card:c,autoPlay:a===t,revealed:e.revealed,disabled:r,position:a*d,padding:parseInt(f,10),onClick:function(t){e.onCardChoose(i,c.id,t)}},c.id)})),r&&Object(n.jsx)("div",{className:"blocker"})]})}function g(e){var t=e.autoPlay,c=e.revealed,a=e.disabled,i=e.onClick,s=e.padding,o=e.side,l=Object(r.useRef)(null),u=Object(r.useCallback)((function(){if(null!==l.current){var e=l.current,t=e.offsetLeft;"right"===o&&(t-=v(s));var c={top:e.offsetTop-v(2.65),left:t,width:e.offsetWidth,height:e.offsetHeight};i(c)}}),[l,s,o,i]);return Object(r.useEffect)((function(){t&&!a&&u()}),[t,a,u]),Object(n.jsx)("div",{ref:l,className:"dc-item",style:{top:"".concat(e.position,"rem"),transform:"translate(-50%, -".concat(2.65,"rem) rotate(-90deg)")},onClick:function(){t||u()},children:Object(n.jsx)(f,Object(d.a)(Object(d.a)({},e.card),{},{open:c,size:"small"}))})}var m=c(7),p=c(33);c(22);function k(e){var t=e.leftSide,c=e.rightSide,a=e.roundWinner,i=e.onClear,s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=setInterval((function(){a&&i(a)}),500);return function(){return clearInterval(e)}}),[a,i]),Object(n.jsxs)("div",{className:"table-container",ref:s,children:[Object(n.jsx)(w,{side:"left",card:t.card,rect:t.rect,wrapper:s.current,zIndex:"left"===e.firstAttack?1:2,roundWinner:a}),Object(n.jsx)(w,{side:"right",card:c.card,rect:c.rect,wrapper:s.current,zIndex:"right"===e.firstAttack?1:2,roundWinner:a})]})}function w(e){var t,c=a.a.useRef(null),r=e.side,i=e.card,s=e.wrapper,o=e.roundWinner,l=e.rect,h={};if(l&&null!==s){var j=l.left;"left"===r?j-=s.offsetLeft:"right"===r&&(j+=s.offsetWidth),h={top:l.top-s.offsetTop,left:j,width:l.width,height:l.height}}var b=u()("tc-card-container",(t={},Object(m.a)(t,"tc-".concat(r,"-card"),r),Object(m.a)(t,"tc-winner-".concat(o),o),t));return Object(n.jsx)(p.a,{in:i&&!o,nodeRef:c,unmountOnExit:!0,timeout:500,classNames:"tccc-wrapper",children:Object(n.jsx)("div",{ref:c,className:b,style:Object(d.a)(Object(d.a)({},h),{},{zIndex:e.zIndex}),children:Object(n.jsxs)("div",{className:"tccc-inner",children:[Object(n.jsx)("div",{className:"rccc-front",children:i&&Object(n.jsx)(f,Object(d.a)(Object(d.a)({},i),{},{size:"flexible"}))}),Object(n.jsx)("div",{className:"rccc-back",children:i&&Object(n.jsx)(f,Object(d.a)(Object(d.a)({},i),{},{open:!0,size:"flexible"}))})]})})})}c(25);function C(e){var t=Object(r.useRef)(null),c=u()("resizable-container",e.className);return Object(r.useLayoutEffect)((function(){var e=function(){!function(e){var t=document.documentElement;if(e&&t){var c=window.innerWidth,n=window.innerHeight,r=c/n,a={width:c,height:n};r<j?a.width=n*j:r>2&&(a.width=2*n),a.width>c&&(a.width=c,a.height=c/j),Object.keys(a).forEach((function(t){"width"!==t&&"height"!==t||e.style.setProperty(t,"".concat(a[t],"px"))}));var i=Math.min(c/192,n/h);t.style.fontSize="".concat(i,"px")}}(t.current)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(n.jsx)("div",{ref:t,className:c,children:e.children})}c(26);function I(e){return Object(n.jsx)("button",{type:"button",className:u()("button",e.className),onClick:e.onClick,children:e.text})}c(27);function y(e){return s.a.createPortal(Object(n.jsxs)(C,{className:"overlay",children:[Object(n.jsx)("div",{className:"blocker"}),Object(n.jsxs)("div",{className:"overlay-content",children:[Object(n.jsx)("h1",{className:"overlay-title",children:e.title}),Object(n.jsx)("p",{className:"overlay-text",children:e.text}),Object(n.jsx)(I,{text:e.buttonText,onClick:e.onClick})]})]}),document.body)}c(28);function N(e){return Object(n.jsxs)("label",{className:"switch-container",children:[Object(n.jsxs)("div",{className:"switch",children:[Object(n.jsx)("input",{type:"checkbox",onChange:function(t){e.onChange(t.target.checked)}}),Object(n.jsx)("span",{className:"slider"})]}),Object(n.jsx)("p",{className:"switch-text",children:e.text})]})}c(29);function S(e){return Object(n.jsxs)("div",{className:"header-container",children:[Object(n.jsx)("div",{className:"hc-score hcs-left",children:e.leftScore}),Object(n.jsx)(N,{text:"Reveal cards",onChange:e.onChangeRevealCards}),Object(n.jsx)(N,{text:"Autoplay",onChange:e.onChangeAutoPlay}),Object(n.jsx)("div",{className:"hc-score hcs-right",children:e.rightScore})]})}var z=c(11),D=c(9),E=function e(t){Object(D.a)(this,e),this.rank=void 0,this.rankId=void 0,this.id=void 0,this.front=void 0,this.back=void 0,this.color=void 0,this.id=t.id,this.rank=t.rank,this.rankId=t.rankId,this.front="/cards/".concat(t.id,".png"),this.back="/cards/".concat(t.color,"_back.png"),this.color=t.color},P=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],R=["C","D","H","S"],W=function e(t){var c=this;Object(D.a)(this,e),this.cards=[],this.cardsInDeck=[],this.shuffle=function(){c.cardsInDeck=function(e){for(var t,c=[],n=e.length;n;)(t=Math.floor(Math.random()*e.length))in e&&(c.push(e[t]),delete e[t],n--);return c}(c.cardsInDeck)},this.pullCardByIndex=function(e){if(!(e<0||e>c.cardsInDeck.length))return c.cardsInDeck.splice(e,1)[0]},this.pullCardById=function(e){var t=c.cardsInDeck.findIndex((function(t){return t.id===e}));if(-1!==t)return c.cardsInDeck.splice(t,1)[0]},this.collect=function(){c.cardsInDeck=Object(z.a)(c.cards),c.shuffle()};for(var n=0,r=P.length;n<r;n++)for(var a=0,i=R.length;a<i;a++){var s="".concat(P[n]).concat(R[a]);this.cards.push(new E({rank:n,rankId:P[n],id:s,color:t}))}this.cardsInDeck=Object(z.a)(this.cards),this.shuffle()},L=(c(30),{});var A=function(){var e=Object(r.useRef)(new W("green")),t=Object(r.useRef)(new W("red")),c=Object(r.useState)(L),a=Object(o.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(0),l=Object(o.a)(d,2),u=l[0],f=l[1],h=Object(r.useState)(L),j=Object(o.a)(h,2),b=j[0],O=j[1],v=Object(r.useState)(0),g=Object(o.a)(v,2),m=g[0],p=g[1],w=Object(r.useState)(),I=Object(o.a)(w,2),N=I[0],z=I[1],D=Object(r.useState)(),E=Object(o.a)(D,2),P=E[0],R=E[1],A=Object(r.useState)(!1),M=Object(o.a)(A,2),T=M[0],B=M[1],H=Object(r.useState)(!1),F=Object(o.a)(H,2),J=F[0],G=F[1],K=Object(r.useState)(!1),Q=Object(o.a)(K,2),V=Q[0],_=Q[1],q=Object(r.useCallback)((function(c,n,r){if("left"===c){var a=e.current.pullCardById(n);a&&(s({card:a,rect:r}),b.card||z("left"))}else{var o=t.current.pullCardById(n);o&&(O({card:o,rect:r}),i.card||z("right"))}}),[i.card,b.card]),U=Object(r.useCallback)((function(e){switch(e){case"left":f(u+1);break;case"right":p(m+1)}R(void 0),s(L),O(L)}),[u,m]),X=Object(r.useCallback)((function(){e.current.collect(),t.current.collect(),f(0),p(0),_(!1)}),[]);Object(r.useEffect)((function(){var e=setInterval((function(){var e;i.card&&b.card&&(e=i.card.rank>b.card.rank?"left":i.card.rank<b.card.rank?"right":"draw",R(e))}),1e3);return function(){return clearInterval(e)}}),[i.card,b.card,u,m]),Object(r.useEffect)((function(){P||0!==e.current.cardsInDeck.length||0!==t.current.cardsInDeck.length||_(!0)}),[P]);var Y,Z,$="";return V&&(u>m?(Y="left",Z=u):u<m&&(Y="right",Z=m),$=Y?"".concat(Y," player wins with score ").concat(Z):"The game ended in a draw"),Object(n.jsxs)(C,{className:"app-container",children:[Object(n.jsx)(S,{leftScore:u,rightScore:m,onChangeAutoPlay:B,onChangeRevealCards:G}),Object(n.jsx)(x,{autoPlay:T,revealed:J,side:"left",disabled:!!i.card,list:e.current.cardsInDeck,onCardChoose:q}),Object(n.jsx)(k,{leftSide:i,rightSide:b,firstAttack:N,onClear:U,roundWinner:P}),Object(n.jsx)(x,{autoPlay:!0,side:"right",disabled:!!b.card,list:t.current.cardsInDeck,onCardChoose:q}),V&&Object(n.jsx)(y,{title:"Game Over",text:$,buttonText:"Restart",onClick:X})]})},M=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,34)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),r(e),a(e),i(e)}))};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(A,{})}),document.getElementById("root")),M()}},[[31,1,2]]]);
//# sourceMappingURL=main.65a0d3c3.chunk.js.map