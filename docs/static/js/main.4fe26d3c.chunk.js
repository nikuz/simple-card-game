(this["webpackJsonpsimple-card-game"]=this["webpackJsonpsimple-card-game"]||[]).push([[0],[,,,,,,,,,,,function(e){e.exports=JSON.parse('{"name":"simple-card-game","version":"0.1.8","private":false,"homepage":"https://nikuz.github.io/simple-card-game","dependencies":{"@testing-library/jest-dom":"^5.11.6","@testing-library/react":"^11.2.2","@testing-library/user-event":"^12.6.0","@types/jest":"^26.0.19","@types/node":"^12.19.9","@types/react":"^16.14.2","@types/react-dom":"^16.9.10","classnames":"^2.2.6","react":"^17.0.1","react-dom":"^17.0.1","react-scripts":"4.0.1","react-transition-group":"^4.4.1","typescript":"^4.1.3","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build && rm -rf docs && mv build docs","test":"react-scripts test","eject":"react-scripts eject","prebuild":"npm run eslint","eslint":"eslint src/**/*.ts src/**/*.tsx"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/classnames":"^2.2.11","@types/react-transition-group":"^4.4.0"}}')},,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(1),a=c.n(r),i=c(5),s=c.n(i),o=(c(20),c(2)),d=c(4),l=c(3),u=c.n(l);c(21);function f(e){if(""===e.id)return null;var t=u()("cc-image",{small:"small"===e.size,big:"big"===e.size,flexible:"flexible"===e.size});return Object(n.jsx)("div",{className:"card-container",children:Object(n.jsx)("img",{src:e.open?e.front:e.back,className:t,alt:""})})}var h=108,j=1.777;var b=window.innerWidth,O=window.innerHeight;window.addEventListener("resize",(function(){b=window.innerWidth,O=window.innerHeight}));var p=function(e){return e*Math.min(b/192,O/h)};c(22);function v(e){var t,c=e.autoPlay,r=e.disabled,a=e.list,i=e.side,s=u()("deck-container","dc-".concat(i),{disabled:r}),d=98/(a.length-1),l=function(e){var t=[];if(!document.documentElement)return t;var c=getComputedStyle(document.documentElement);return e.forEach((function(e){t.push(c.getPropertyValue("--".concat(e)))})),t}(["hover-padding"]),f=Object(o.a)(l,1)[0];return c&&!r&&(t=Math.floor(Math.random()*a.length)),Object(n.jsxs)("div",{className:s,children:[a.map((function(c,a){return Object(n.jsx)(m,{side:i,card:c,autoPlay:a===t,revealed:e.revealed,disabled:r,position:a*d,padding:parseInt(f,10),onClick:function(t){e.onCardChoose(i,c.id,t)}},c.id)})),r&&Object(n.jsx)("div",{className:"blocker"})]})}function m(e){var t=e.autoPlay,c=e.revealed,a=e.disabled,i=e.onClick,s=e.padding,o=e.side,l=Object(r.useRef)(null),u=Object(r.useCallback)((function(){if(null!==l.current){var e=l.current,t=e.offsetLeft;"right"===o&&(t-=p(s));var c={top:e.offsetTop-p(2.65),left:t,width:e.offsetWidth,height:e.offsetHeight};i(c)}}),[l,s,o,i]);return Object(r.useEffect)((function(){t&&!a&&u()}),[t,a,u]),Object(n.jsx)("div",{ref:l,className:"dc-item",style:{top:"".concat(e.position,"rem"),transform:"translate(-50%, -".concat(2.65,"rem) rotate(-90deg)")},onClick:function(){t||u()},children:Object(n.jsx)(f,Object(d.a)(Object(d.a)({},e.card),{},{open:c,size:"small"}))})}var g=c(7),x=c(34);c(23);function k(e){var t=e.leftSide,c=e.rightSide,a=e.roundWinner,i=e.onClear,s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=setInterval((function(){a&&i(a)}),500);return function(){return clearInterval(e)}}),[a,i]),Object(n.jsxs)("div",{className:"table-container",ref:s,children:[Object(n.jsx)(w,{side:"left",card:t.card,rect:t.rect,wrapper:s.current,zIndex:"left"===e.firstAttack?1:2,roundWinner:a}),Object(n.jsx)(w,{side:"right",card:c.card,rect:c.rect,wrapper:s.current,zIndex:"right"===e.firstAttack?1:2,roundWinner:a})]})}function w(e){var t,c=a.a.useRef(null),r=e.side,i=e.card,s=e.wrapper,o=e.roundWinner,l=e.rect,h={};if(l&&null!==s){var j=l.left;"left"===r?j-=s.offsetLeft:"right"===r&&(j+=s.offsetWidth),h={top:l.top-s.offsetTop,left:j,width:l.width,height:l.height}}var b=u()("tc-card-container",(t={},Object(g.a)(t,"tc-".concat(r,"-card"),r),Object(g.a)(t,"tc-winner-".concat(o),o),t));return Object(n.jsx)(x.a,{in:i&&!o,nodeRef:c,unmountOnExit:!0,timeout:500,classNames:"tccc-wrapper",children:Object(n.jsx)("div",{ref:c,className:b,style:Object(d.a)(Object(d.a)({},h),{},{zIndex:e.zIndex}),children:Object(n.jsxs)("div",{className:"tccc-inner",children:[Object(n.jsx)("div",{className:"rccc-front",children:i&&Object(n.jsx)(f,Object(d.a)(Object(d.a)({},i),{},{size:"flexible"}))}),Object(n.jsx)("div",{className:"rccc-back",children:i&&Object(n.jsx)(f,Object(d.a)(Object(d.a)({},i),{},{open:!0,size:"flexible"}))})]})})})}c(26);function y(e){var t=Object(r.useRef)(null),c=u()("resizable-container",e.className);return Object(r.useLayoutEffect)((function(){var e=function(){!function(e){var t=document.documentElement;if(e&&t){var c=window.innerWidth,n=window.innerHeight,r=c/n,a={width:c,height:n};r<j?a.width=n*j:r>2&&(a.width=2*n),a.width>c&&(a.width=c,a.height=c/j),Object.keys(a).forEach((function(t){"width"!==t&&"height"!==t||e.style.setProperty(t,"".concat(a[t],"px"))}));var i=Math.min(c/192,n/h);t.style.fontSize="".concat(i,"px")}}(t.current)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(n.jsx)("div",{ref:t,className:c,children:e.children})}c(27);function C(e){return Object(n.jsx)("button",{type:"button",className:u()("button",e.className),onClick:e.onClick,children:e.text})}c(28);function I(e){return s.a.createPortal(Object(n.jsxs)(y,{className:"overlay",children:[Object(n.jsx)("div",{className:"blocker"}),Object(n.jsxs)("div",{className:"overlay-content",children:[Object(n.jsx)("h1",{className:"overlay-title",children:e.title}),Object(n.jsx)("p",{className:"overlay-text",children:e.text}),Object(n.jsx)(C,{text:e.buttonText,onClick:e.onClick})]})]}),document.body)}c(29);function N(e){return Object(n.jsxs)("label",{className:"switch-container",children:[Object(n.jsxs)("div",{className:"switch",children:[Object(n.jsx)("input",{type:"checkbox",onChange:function(t){e.onChange(t.target.checked)}}),Object(n.jsx)("span",{className:"slider"})]}),Object(n.jsx)("p",{className:"switch-text",children:e.text})]})}c(30);function S(e){return Object(n.jsxs)("div",{className:"header-container",children:[Object(n.jsx)("div",{className:"hc-score hcs-left",children:e.leftScore}),Object(n.jsx)(N,{text:"Reveal cards",onChange:e.onChangeRevealCards}),Object(n.jsx)(N,{text:"Autoplay",onChange:e.onChangeAutoPlay}),Object(n.jsx)("div",{className:"hc-score hcs-right",children:e.rightScore})]})}var z=c(12),D=c(9),E=c(11),P=function e(t){Object(D.a)(this,e),this.rank=void 0,this.rankId=void 0,this.id=void 0,this.front=void 0,this.back=void 0,this.color=void 0,this.id=t.id,this.rank=t.rank,this.rankId=t.rankId,this.front="/".concat(E.name,"/cards/").concat(t.id,".png"),this.back="/".concat(E.name,"/cards/").concat(t.color,"_back.png"),this.color=t.color},R=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],W=["C","D","H","S"],L=function e(t){var c=this;Object(D.a)(this,e),this.cards=[],this.cardsInDeck=[],this.shuffle=function(){c.cardsInDeck=function(e){for(var t,c=[],n=e.length;n;)(t=Math.floor(Math.random()*e.length))in e&&(c.push(e[t]),delete e[t],n--);return c}(c.cardsInDeck)},this.pullCardByIndex=function(e){if(!(e<0||e>c.cardsInDeck.length))return c.cardsInDeck.splice(e,1)[0]},this.pullCardById=function(e){var t=c.cardsInDeck.findIndex((function(t){return t.id===e}));if(-1!==t)return c.cardsInDeck.splice(t,1)[0]},this.collect=function(){c.cardsInDeck=Object(z.a)(c.cards),c.shuffle()};for(var n=0,r=R.length;n<r;n++)for(var a=0,i=W.length;a<i;a++){var s="".concat(R[n]).concat(W[a]);this.cards.push(new P({rank:n,rankId:R[n],id:s,color:t}))}this.cardsInDeck=Object(z.a)(this.cards),this.shuffle()},A=(c(31),{});var M=function(){var e=Object(r.useRef)(new L("green")),t=Object(r.useRef)(new L("red")),c=Object(r.useState)(A),a=Object(o.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(0),l=Object(o.a)(d,2),u=l[0],f=l[1],h=Object(r.useState)(A),j=Object(o.a)(h,2),b=j[0],O=j[1],p=Object(r.useState)(0),m=Object(o.a)(p,2),g=m[0],x=m[1],w=Object(r.useState)(),C=Object(o.a)(w,2),N=C[0],z=C[1],D=Object(r.useState)(),E=Object(o.a)(D,2),P=E[0],R=E[1],W=Object(r.useState)(!1),M=Object(o.a)(W,2),T=M[0],B=M[1],H=Object(r.useState)(!1),F=Object(o.a)(H,2),J=F[0],_=F[1],G=Object(r.useState)(!1),K=Object(o.a)(G,2),Q=K[0],V=K[1],q=Object(r.useCallback)((function(c,n,r){if("left"===c){var a=e.current.pullCardById(n);a&&(s({card:a,rect:r}),b.card||z("left"))}else{var o=t.current.pullCardById(n);o&&(O({card:o,rect:r}),i.card||z("right"))}}),[i.card,b.card]),U=Object(r.useCallback)((function(e){switch(e){case"left":f(u+1);break;case"right":x(g+1)}R(void 0),s(A),O(A)}),[u,g]),X=Object(r.useCallback)((function(){e.current.collect(),t.current.collect(),f(0),x(0),V(!1)}),[]);Object(r.useEffect)((function(){var e=setInterval((function(){var e;i.card&&b.card&&(e=i.card.rank>b.card.rank?"left":i.card.rank<b.card.rank?"right":"draw",R(e))}),1e3);return function(){return clearInterval(e)}}),[i.card,b.card,u,g]),Object(r.useEffect)((function(){P||0!==e.current.cardsInDeck.length||0!==t.current.cardsInDeck.length||V(!0)}),[P]);var Y,Z,$="";return Q&&(u>g?(Y="left",Z=u):u<g&&(Y="right",Z=g),$=Y?"".concat(Y," player wins with score ").concat(Z):"The game ended in a draw"),Object(n.jsxs)(y,{className:"app-container",children:[Object(n.jsx)(S,{leftScore:u,rightScore:g,onChangeAutoPlay:B,onChangeRevealCards:_}),Object(n.jsx)(v,{autoPlay:T,revealed:J,side:"left",disabled:!!i.card,list:e.current.cardsInDeck,onCardChoose:q}),Object(n.jsx)(k,{leftSide:i,rightSide:b,firstAttack:N,onClear:U,roundWinner:P}),Object(n.jsx)(v,{autoPlay:!0,side:"right",disabled:!!b.card,list:t.current.cardsInDeck,onCardChoose:q}),Q&&Object(n.jsx)(I,{title:"Game Over",text:$,buttonText:"Restart",onClick:X})]})},T=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,35)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),r(e),a(e),i(e)}))};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(M,{})}),document.getElementById("root")),T()}],[[32,1,2]]]);
//# sourceMappingURL=main.4fe26d3c.chunk.js.map