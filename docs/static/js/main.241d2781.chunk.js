(this["webpackJsonpsimple-card-game"]=this["webpackJsonpsimple-card-game"]||[]).push([[0],[,,,,,,,,,,,function(e){e.exports=JSON.parse('{"name":"simple-card-game","version":"0.1.13","private":false,"homepage":"https://nikuz.github.io/simple-card-game","dependencies":{"classnames":"^2.2.6","react":"^17.0.1","react-dom":"^17.0.1","react-scripts":"4.0.1","react-transition-group":"^4.4.1","typescript":"^4.1.3","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build && rm -rf docs && mv build docs","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"],"rules":{"semi":"error","indent":["error",4,{"SwitchCase":1}],"object-shorthand":["error"],"quotes":["error","single"],"quote-props":["error","as-needed"],"no-param-reassign":"error"}},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@testing-library/jest-dom":"^5.11.6","@testing-library/react":"^11.2.2","@testing-library/user-event":"^12.6.0","@types/classnames":"^2.2.11","@types/jest":"^26.0.19","@types/node":"^12.19.9","@types/react":"^16.14.2","@types/react-dom":"^16.9.10","@types/react-transition-group":"^4.4.0"}}')},,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n,r,a,s,i=c(0),o=c(1),l=c.n(o),d=c(5),u=c.n(d),f=(c(20),c(3)),j=c(2),b=c.n(j),h=c.p+"static/media/loading.4f271669.svg";!function(e){e.red="red",e.green="green",e.blue="blue",e.yellow="yellow",e.gray="gray",e.purple="purple"}(n||(n={})),function(e){e.left="left",e.right="right"}(r||(r={})),function(e){e.left="left",e.right="right",e.draw="draw"}(a||(a={})),function(e){e.small="small",e.big="big",e.flexible="flexible"}(s||(s={}));c(21);function O(e){var t=b()("loading-icon",{small:e.size===s.small,big:e.size===s.big},e.className);return Object(i.jsx)("img",{src:h,alt:"",className:t})}var m=c(12),p=c(9),g=c(11),v=function e(t){Object(p.a)(this,e),this.rank=void 0,this.rankId=void 0,this.id=void 0,this.front=void 0,this.back=void 0,this.color=void 0,this.id=t.id,this.rank=t.rank,this.rankId=t.rankId,this.front="/".concat(g.name,"/cards/").concat(t.id,".png"),this.back="/".concat(g.name,"/cards/").concat(t.color,"_back.png"),this.color=t.color},x=108,k=1.777;var w=window.innerWidth,y=window.innerHeight;window.addEventListener("resize",(function(){w=window.innerWidth,y=window.innerHeight}));var C=function(e){return e*Math.min(w/192,y/x)},N=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],I=["C","D","H","S"],S=function e(t){var c=this;Object(p.a)(this,e),this.cards=[],this.cardsInDeck=[],this.shuffle=function(){c.cardsInDeck=function(e){for(var t,c=[],n=e.length;n;)(t=Math.floor(Math.random()*e.length))in e&&(c.push(e[t]),delete e[t],n--);return c}(c.cardsInDeck)},this.pullCardByIndex=function(e){if(!(e<0||e>c.cardsInDeck.length))return c.cardsInDeck.splice(e,1)[0]},this.pullCardById=function(e){var t=c.cardsInDeck.findIndex((function(t){return t.id===e}));if(-1!==t)return c.cardsInDeck.splice(t,1)[0]},this.collect=function(){c.cardsInDeck=Object(m.a)(c.cards),c.shuffle()};for(var n=0,r=N.length;n<r;n++)for(var a=0,s=I.length;a<s;a++){var i="".concat(N[n]).concat(I[a]);this.cards.push(new v({rank:n,rankId:N[n],id:i,color:t}))}this.cardsInDeck=Object(m.a)(this.cards),this.shuffle()};c(22);function E(e){var t=e.colors,c=e.onLoading,n=Object(o.useRef)(new S(t[0])),r=Object(o.useRef)(new S(t[1])),a=n.current.cards,s=Object(o.useState)(0),l=Object(f.a)(s,2),d=l[0],u=l[1],j=a.length+2;Object(o.useEffect)((function(){d===j&&c()}),[d,j,c]);var b=Object(o.useCallback)((function(){u(d+1)}),[d]),h=Math.round(d/(j/100));return Object(i.jsxs)("div",{className:"preloader-container blocker",children:[Object(i.jsx)(O,{}),Object(i.jsxs)("div",{className:"pc-progress",children:[h||0,"%"]}),Object(i.jsxs)("div",{className:"preloader-deck",children:[a.map((function(e){return Object(i.jsx)(z,{src:e.front,onLoad:b,onError:c},e.id)})),Object(i.jsx)(z,{src:a[0].back,onLoad:b,onError:c}),Object(i.jsx)(z,{src:r.current.cards[0].back,onLoad:b,onError:c})]})]})}function z(e){return Object(i.jsx)("img",{src:e.src,className:"pcd-card",alt:"",onLoad:e.onLoad,onError:e.onError})}var D=c(4);c(23);function L(e){if(""===e.id)return null;var t=b()("cc-image",{small:e.size===s.small,big:e.size===s.big,flexible:e.size===s.flexible});return Object(i.jsx)("div",{className:"card-container",children:Object(i.jsx)("img",{src:e.open?e.front:e.back,className:t,alt:""})})}c(24);function R(e){var t,c=e.autoPlay,n=e.disabled,r=e.list,a=e.side,s=b()("deck-container","dc-".concat(a),{disabled:n}),o=98/(r.length-1),l=parseInt(function(e,t){var c=[];if(!document.documentElement)return c;var n=getComputedStyle(t||document.documentElement);return e.forEach((function(e){c.push(n.getPropertyValue("--".concat(e)))})),c}(["hover-padding"])[0],10);return c&&!n&&(t=Math.floor(Math.random()*r.length)),Object(i.jsxs)("div",{className:s,children:[r.map((function(c,r){return Object(i.jsx)(T,{side:a,card:c,autoPlay:r===t,revealed:e.revealed,disabled:n,position:r*o,padding:l||0,onClick:function(t){e.onCardChoose(a,c.id,t)}},c.id)})),n&&Object(i.jsx)("div",{className:"blocker"})]})}function T(e){var t=e.autoPlay,c=e.revealed,n=e.disabled,a=e.onClick,l=e.padding,d=e.side,u=Object(o.useRef)(null),f=Object(o.useCallback)((function(){if(null!==u.current){var e=u.current,t=e.offsetLeft;d===r.right&&(t-=C(l));var c={top:e.offsetTop-C(2.65),left:t,width:e.offsetWidth,height:e.offsetHeight};a(c)}}),[u,l,d,a]);return Object(o.useEffect)((function(){var e=setTimeout((function(){t&&!n&&f()}),10);return function(){return clearTimeout(e)}}),[t,n,f]),Object(i.jsx)("div",{ref:u,className:"dc-item",style:{top:"".concat(e.position,"rem"),transform:"translate(-50%, -".concat(2.65,"rem) rotate(-90deg)")},onClick:function(){t||f()},children:Object(i.jsx)(L,Object(D.a)(Object(D.a)({},e.card),{},{open:c,size:s.small}))})}var P=c(7),W=c(36);c(25);function M(e){var t=e.leftSide,c=e.rightSide,n=e.roundWinner,a=e.onClear,s=Object(o.useRef)(null);return Object(o.useEffect)((function(){var e=setTimeout((function(){n&&a(n)}),500);return function(){return clearTimeout(e)}}),[n,a]),Object(i.jsxs)("div",{className:"table-container",ref:s,children:[Object(i.jsx)(A,{side:r.left,card:t.card,rect:t.rect,wrapper:s.current,zIndex:e.firstAttack===r.left?1:2,roundWinner:n}),Object(i.jsx)(A,{side:r.right,card:c.card,rect:c.rect,wrapper:s.current,zIndex:e.firstAttack===r.right?1:2,roundWinner:n})]})}function A(e){var t,c=l.a.useRef(null),n=e.side,a=e.card,o=e.wrapper,d=e.roundWinner,u=e.rect,f={};if(u&&null!==o){var j=u.left;n===r.left?j-=o.offsetLeft:n===r.right&&(j+=o.offsetWidth),f={top:u.top-o.offsetTop,left:j,width:u.width,height:u.height}}var h=b()("tc-card-container",(t={},Object(P.a)(t,"tc-".concat(n,"-card"),n),Object(P.a)(t,"tc-winner-".concat(d),d),t));return Object(i.jsx)(W.a,{in:a&&!d,nodeRef:c,unmountOnExit:!0,timeout:500,classNames:"tccc-wrapper",children:Object(i.jsx)("div",{ref:c,className:h,style:Object(D.a)(Object(D.a)({},f),{},{zIndex:e.zIndex}),children:Object(i.jsxs)("div",{className:"tccc-inner",children:[Object(i.jsx)("div",{className:"rccc-front",children:a&&Object(i.jsx)(L,Object(D.a)(Object(D.a)({},a),{},{size:s.flexible}))}),Object(i.jsx)("div",{className:"rccc-back",children:a&&Object(i.jsx)(L,Object(D.a)(Object(D.a)({},a),{},{open:!0,size:s.flexible}))})]})})})}c(28);function B(e){var t=Object(o.useRef)(null),c=b()("resizable-container",e.className);return Object(o.useLayoutEffect)((function(){var e=function(){!function(e){var t=document.documentElement;if(e&&t){var c=window.innerWidth,n=window.innerHeight,r=c/n,a={width:c,height:n};r<k?a.width=n*k:r>2&&(a.width=2*n),a.width>c&&(a.width=c,a.height=c/k),Object.keys(a).forEach((function(t){"width"!==t&&"height"!==t||e.style.setProperty(t,"".concat(a[t],"px"))}));var s=Math.min(c/192,n/x);t.style.fontSize="".concat(s,"px")}}(t.current)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(i.jsx)("div",{ref:t,className:c,children:e.children})}c(29);function H(e){return Object(i.jsx)("button",{type:"button",className:b()("button",e.className),onClick:e.onClick,children:e.text})}c(30);function F(e){return u.a.createPortal(Object(i.jsxs)(B,{className:"overlay",children:[Object(i.jsx)("div",{className:"blocker"}),Object(i.jsxs)("div",{className:"overlay-content",children:[Object(i.jsx)("h1",{className:"overlay-title",children:e.title}),Object(i.jsx)("p",{className:"overlay-text",children:e.text}),Object(i.jsx)(H,{text:e.buttonText,onClick:e.onClick})]})]}),document.body)}c(31);function J(e){var t=b()("switch-container",e.className);return Object(i.jsxs)("label",{className:t,children:[Object(i.jsxs)("div",{className:"switch",children:[Object(i.jsx)("input",{type:"checkbox",onChange:function(t){e.onChange(t.target.checked)}}),Object(i.jsx)("span",{className:"slider"})]}),Object(i.jsx)("p",{className:"switch-text",children:e.text})]})}c(32);function q(e){return Object(i.jsxs)("div",{className:"header-container",children:[Object(i.jsx)("div",{className:"hc-score hcs-left",children:e.leftScore}),Object(i.jsx)(J,{text:"Reveal cards",className:"hc-switch",onChange:e.onChangeRevealCards}),Object(i.jsx)(J,{text:"Autoplay",className:"hc-switch",onChange:e.onChangeAutoPlay}),Object(i.jsx)("div",{className:"hc-score hcs-right",children:e.rightScore})]})}c(33);var _={};function G(){var e=n.green,t=n.red,c=Object(o.useRef)(new S(e)),s=Object(o.useRef)(new S(t)),l=Object(o.useState)(!1),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(o.useState)(_),h=Object(f.a)(b,2),O=h[0],m=h[1],p=Object(o.useState)(0),g=Object(f.a)(p,2),v=g[0],x=g[1],k=Object(o.useState)(_),w=Object(f.a)(k,2),y=w[0],C=w[1],N=Object(o.useState)(0),I=Object(f.a)(N,2),z=I[0],D=I[1],L=Object(o.useState)(),T=Object(f.a)(L,2),P=T[0],W=T[1],A=Object(o.useState)(),H=Object(f.a)(A,2),J=H[0],G=H[1],K=Object(o.useState)(!1),Q=Object(f.a)(K,2),V=Q[0],U=Q[1],X=Object(o.useState)(!1),Y=Object(f.a)(X,2),Z=Y[0],$=Y[1],ee=Object(o.useState)(!1),te=Object(f.a)(ee,2),ce=te[0],ne=te[1],re=Object(o.useCallback)((function(e,t,n){if(e===r.left){var a=c.current.pullCardById(t);a&&(m({card:a,rect:n}),y.card||W(r.left))}else{var i=s.current.pullCardById(t);i&&(C({card:i,rect:n}),O.card||W(r.right))}}),[O.card,y.card]),ae=Object(o.useCallback)((function(e){switch(e){case a.left:x(v+1);break;case a.right:D(z+1)}G(void 0),m(_),C(_)}),[v,z]),se=Object(o.useCallback)((function(){c.current.collect(),s.current.collect(),x(0),D(0),ne(!1)}),[]);if(Object(o.useEffect)((function(){var e=setTimeout((function(){var e;O.card&&y.card&&(e=O.card.rank>y.card.rank?a.left:O.card.rank<y.card.rank?a.right:a.draw,G(e))}),1e3);return function(){return clearTimeout(e)}}),[O.card,y.card,v,z]),Object(o.useEffect)((function(){J||0!==c.current.cardsInDeck.length||0!==s.current.cardsInDeck.length||ne(!0)}),[J]),!u)return Object(i.jsx)(B,{className:"app-container",children:Object(i.jsx)(E,{colors:[e,t],onLoading:function(){return j(!0)}})});var ie,oe,le="";ce&&(v>z?(ie=a.left,oe=v):v<z&&(ie=a.right,oe=z),le=ie?"".concat(ie," player wins with score ").concat(oe):"The game ended in a draw");return Object(i.jsxs)(B,{className:"app-container",children:[Object(i.jsx)(q,{leftScore:v,rightScore:z,onChangeAutoPlay:U,onChangeRevealCards:$}),Object(i.jsx)(R,{autoPlay:V,revealed:Z,side:r.left,disabled:!!O.card,list:c.current.cardsInDeck,onCardChoose:re}),Object(i.jsx)(M,{leftSide:O,rightSide:y,firstAttack:P,onClear:ae,roundWinner:J}),Object(i.jsx)(R,{autoPlay:!0,side:r.right,disabled:!!y.card,list:s.current.cardsInDeck,onCardChoose:re}),ce&&Object(i.jsx)(F,{title:"Game Over",text:le,buttonText:"Restart",onClick:se})]})}var K=function(e){e instanceof Function&&c.e(3).then(c.bind(null,37)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};u.a.render(Object(i.jsx)(l.a.StrictMode,{children:Object(i.jsx)(G,{})}),document.getElementById("root")),K()}],[[34,1,2]]]);
//# sourceMappingURL=main.241d2781.chunk.js.map