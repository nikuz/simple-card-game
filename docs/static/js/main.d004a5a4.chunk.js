(this["webpackJsonpsimple-card-game"]=this["webpackJsonpsimple-card-game"]||[]).push([[0],[,,,,,,,,,,,function(e){e.exports=JSON.parse('{"name":"simple-card-game","version":"0.1.9","private":false,"homepage":"https://nikuz.github.io/simple-card-game","dependencies":{"@testing-library/jest-dom":"^5.11.6","@testing-library/react":"^11.2.2","@testing-library/user-event":"^12.6.0","@types/jest":"^26.0.19","@types/node":"^12.19.9","@types/react":"^16.14.2","@types/react-dom":"^16.9.10","classnames":"^2.2.6","react":"^17.0.1","react-dom":"^17.0.1","react-scripts":"4.0.1","react-transition-group":"^4.4.1","typescript":"^4.1.3","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build && rm -rf docs && mv build docs","test":"react-scripts test","eject":"react-scripts eject","prebuild":"npm run eslint","eslint":"eslint src/**/*.ts src/**/*.tsx"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/classnames":"^2.2.11","@types/react-transition-group":"^4.4.0"}}')},,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(1),a=c.n(r),i=c(5),s=c.n(i),o=(c(20),c(2)),l=c(3),d=c.n(l),u=c.p+"static/media/loading.4f271669.svg";c(21);function f(e){var t=d()("loading-icon",{small:"small"===e.size,big:"big"===e.size},e.className);return Object(n.jsx)("img",{src:u,alt:"",className:t})}var j=c(12),b=c(9),h=c(11),O=function e(t){Object(b.a)(this,e),this.rank=void 0,this.rankId=void 0,this.id=void 0,this.front=void 0,this.back=void 0,this.color=void 0,this.id=t.id,this.rank=t.rank,this.rankId=t.rankId,this.front="/".concat(h.name,"/cards/").concat(t.id,".png"),this.back="/".concat(h.name,"/cards/").concat(t.color,"_back.png"),this.color=t.color},v=108,p=1.777;var m=window.innerWidth,g=window.innerHeight;window.addEventListener("resize",(function(){m=window.innerWidth,g=window.innerHeight}));var x=function(e){return e*Math.min(m/192,g/v)},k=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],w=["C","D","H","S"],C=function e(t){var c=this;Object(b.a)(this,e),this.cards=[],this.cardsInDeck=[],this.shuffle=function(){c.cardsInDeck=function(e){for(var t,c=[],n=e.length;n;)(t=Math.floor(Math.random()*e.length))in e&&(c.push(e[t]),delete e[t],n--);return c}(c.cardsInDeck)},this.pullCardByIndex=function(e){if(!(e<0||e>c.cardsInDeck.length))return c.cardsInDeck.splice(e,1)[0]},this.pullCardById=function(e){var t=c.cardsInDeck.findIndex((function(t){return t.id===e}));if(-1!==t)return c.cardsInDeck.splice(t,1)[0]},this.collect=function(){c.cardsInDeck=Object(j.a)(c.cards),c.shuffle()};for(var n=0,r=k.length;n<r;n++)for(var a=0,i=w.length;a<i;a++){var s="".concat(k[n]).concat(w[a]);this.cards.push(new O({rank:n,rankId:k[n],id:s,color:t}))}this.cardsInDeck=Object(j.a)(this.cards),this.shuffle()};c(22);function y(e){var t=e.onLoading,c=Object(r.useRef)(new C("green")).current.cards,a=Object(r.useState)(0),i=Object(o.a)(a,2),s=i[0],l=i[1];Object(r.useEffect)((function(){s===c.length-1&&t();var e=setInterval((function(){t()}),5e3);return function(){return clearInterval(e)}}),[s,c.length,t]);var d=Object(r.useCallback)((function(){l(s+1)}),[s]);return Object(n.jsxs)("div",{className:"preloader-container blocker",children:[Object(n.jsx)(f,{size:"small"}),Object(n.jsx)("div",{className:"preloader-deck",children:c.map((function(e){return Object(n.jsx)("img",{src:e.front,className:"pcd-card",alt:"",onLoad:d,onError:t},e.id)}))})]})}var I=c(4);c(23);function N(e){if(""===e.id)return null;var t=d()("cc-image",{small:"small"===e.size,big:"big"===e.size,flexible:"flexible"===e.size});return Object(n.jsx)("div",{className:"card-container",children:Object(n.jsx)("img",{src:e.open?e.front:e.back,className:t,alt:""})})}c(24);function S(e){var t,c=e.autoPlay,r=e.disabled,a=e.list,i=e.side,s=d()("deck-container","dc-".concat(i),{disabled:r}),l=98/(a.length-1),u=function(e){var t=[];if(!document.documentElement)return t;var c=getComputedStyle(document.documentElement);return e.forEach((function(e){t.push(c.getPropertyValue("--".concat(e)))})),t}(["hover-padding"]),f=Object(o.a)(u,1)[0];return c&&!r&&(t=Math.floor(Math.random()*a.length)),Object(n.jsxs)("div",{className:s,children:[a.map((function(c,a){return Object(n.jsx)(z,{side:i,card:c,autoPlay:a===t,revealed:e.revealed,disabled:r,position:a*l,padding:parseInt(f,10),onClick:function(t){e.onCardChoose(i,c.id,t)}},c.id)})),r&&Object(n.jsx)("div",{className:"blocker"})]})}function z(e){var t=e.autoPlay,c=e.revealed,a=e.disabled,i=e.onClick,s=e.padding,o=e.side,l=Object(r.useRef)(null),d=Object(r.useCallback)((function(){if(null!==l.current){var e=l.current,t=e.offsetLeft;"right"===o&&(t-=x(s));var c={top:e.offsetTop-x(2.65),left:t,width:e.offsetWidth,height:e.offsetHeight};i(c)}}),[l,s,o,i]);return Object(r.useEffect)((function(){t&&!a&&d()}),[t,a,d]),Object(n.jsx)("div",{ref:l,className:"dc-item",style:{top:"".concat(e.position,"rem"),transform:"translate(-50%, -".concat(2.65,"rem) rotate(-90deg)")},onClick:function(){t||d()},children:Object(n.jsx)(N,Object(I.a)(Object(I.a)({},e.card),{},{open:c,size:"small"}))})}var E=c(7),D=c(36);c(25);function P(e){var t=e.leftSide,c=e.rightSide,a=e.roundWinner,i=e.onClear,s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=setInterval((function(){a&&i(a)}),500);return function(){return clearInterval(e)}}),[a,i]),Object(n.jsxs)("div",{className:"table-container",ref:s,children:[Object(n.jsx)(R,{side:"left",card:t.card,rect:t.rect,wrapper:s.current,zIndex:"left"===e.firstAttack?1:2,roundWinner:a}),Object(n.jsx)(R,{side:"right",card:c.card,rect:c.rect,wrapper:s.current,zIndex:"right"===e.firstAttack?1:2,roundWinner:a})]})}function R(e){var t,c=a.a.useRef(null),r=e.side,i=e.card,s=e.wrapper,o=e.roundWinner,l=e.rect,u={};if(l&&null!==s){var f=l.left;"left"===r?f-=s.offsetLeft:"right"===r&&(f+=s.offsetWidth),u={top:l.top-s.offsetTop,left:f,width:l.width,height:l.height}}var j=d()("tc-card-container",(t={},Object(E.a)(t,"tc-".concat(r,"-card"),r),Object(E.a)(t,"tc-winner-".concat(o),o),t));return Object(n.jsx)(D.a,{in:i&&!o,nodeRef:c,unmountOnExit:!0,timeout:500,classNames:"tccc-wrapper",children:Object(n.jsx)("div",{ref:c,className:j,style:Object(I.a)(Object(I.a)({},u),{},{zIndex:e.zIndex}),children:Object(n.jsxs)("div",{className:"tccc-inner",children:[Object(n.jsx)("div",{className:"rccc-front",children:i&&Object(n.jsx)(N,Object(I.a)(Object(I.a)({},i),{},{size:"flexible"}))}),Object(n.jsx)("div",{className:"rccc-back",children:i&&Object(n.jsx)(N,Object(I.a)(Object(I.a)({},i),{},{open:!0,size:"flexible"}))})]})})})}c(28);function L(e){var t=Object(r.useRef)(null),c=d()("resizable-container",e.className);return Object(r.useLayoutEffect)((function(){var e=function(){!function(e){var t=document.documentElement;if(e&&t){var c=window.innerWidth,n=window.innerHeight,r=c/n,a={width:c,height:n};r<p?a.width=n*p:r>2&&(a.width=2*n),a.width>c&&(a.width=c,a.height=c/p),Object.keys(a).forEach((function(t){"width"!==t&&"height"!==t||e.style.setProperty(t,"".concat(a[t],"px"))}));var i=Math.min(c/192,n/v);t.style.fontSize="".concat(i,"px")}}(t.current)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(n.jsx)("div",{ref:t,className:c,children:e.children})}c(29);function W(e){return Object(n.jsx)("button",{type:"button",className:d()("button",e.className),onClick:e.onClick,children:e.text})}c(30);function A(e){return s.a.createPortal(Object(n.jsxs)(L,{className:"overlay",children:[Object(n.jsx)("div",{className:"blocker"}),Object(n.jsxs)("div",{className:"overlay-content",children:[Object(n.jsx)("h1",{className:"overlay-title",children:e.title}),Object(n.jsx)("p",{className:"overlay-text",children:e.text}),Object(n.jsx)(W,{text:e.buttonText,onClick:e.onClick})]})]}),document.body)}c(31);function M(e){return Object(n.jsxs)("label",{className:"switch-container",children:[Object(n.jsxs)("div",{className:"switch",children:[Object(n.jsx)("input",{type:"checkbox",onChange:function(t){e.onChange(t.target.checked)}}),Object(n.jsx)("span",{className:"slider"})]}),Object(n.jsx)("p",{className:"switch-text",children:e.text})]})}c(32);function T(e){return Object(n.jsxs)("div",{className:"header-container",children:[Object(n.jsx)("div",{className:"hc-score hcs-left",children:e.leftScore}),Object(n.jsx)(M,{text:"Reveal cards",onChange:e.onChangeRevealCards}),Object(n.jsx)(M,{text:"Autoplay",onChange:e.onChangeAutoPlay}),Object(n.jsx)("div",{className:"hc-score hcs-right",children:e.rightScore})]})}c(33);var B={};function H(){var e=Object(r.useRef)(new C("green")),t=Object(r.useRef)(new C("red")),c=Object(r.useState)(!1),a=Object(o.a)(c,2),i=a[0],s=a[1],l=Object(r.useState)(B),d=Object(o.a)(l,2),u=d[0],f=d[1],j=Object(r.useState)(0),b=Object(o.a)(j,2),h=b[0],O=b[1],v=Object(r.useState)(B),p=Object(o.a)(v,2),m=p[0],g=p[1],x=Object(r.useState)(0),k=Object(o.a)(x,2),w=k[0],I=k[1],N=Object(r.useState)(),z=Object(o.a)(N,2),E=z[0],D=z[1],R=Object(r.useState)(),W=Object(o.a)(R,2),M=W[0],H=W[1],F=Object(r.useState)(!1),J=Object(o.a)(F,2),_=J[0],G=J[1],K=Object(r.useState)(!1),Q=Object(o.a)(K,2),V=Q[0],q=Q[1],U=Object(r.useState)(!1),X=Object(o.a)(U,2),Y=X[0],Z=X[1],$=Object(r.useCallback)((function(c,n,r){if("left"===c){var a=e.current.pullCardById(n);a&&(f({card:a,rect:r}),m.card||D("left"))}else{var i=t.current.pullCardById(n);i&&(g({card:i,rect:r}),u.card||D("right"))}}),[u.card,m.card]),ee=Object(r.useCallback)((function(e){switch(e){case"left":O(h+1);break;case"right":I(w+1)}H(void 0),f(B),g(B)}),[h,w]),te=Object(r.useCallback)((function(){e.current.collect(),t.current.collect(),O(0),I(0),Z(!1)}),[]);if(Object(r.useEffect)((function(){var e=setInterval((function(){var e;u.card&&m.card&&(e=u.card.rank>m.card.rank?"left":u.card.rank<m.card.rank?"right":"draw",H(e))}),1e3);return function(){return clearInterval(e)}}),[u.card,m.card,h,w]),Object(r.useEffect)((function(){M||0!==e.current.cardsInDeck.length||0!==t.current.cardsInDeck.length||Z(!0)}),[M]),!i)return Object(n.jsx)(y,{onLoading:function(){return s(!0)}});var ce,ne,re="";Y&&(h>w?(ce="left",ne=h):h<w&&(ce="right",ne=w),re=ce?"".concat(ce," player wins with score ").concat(ne):"The game ended in a draw");return Object(n.jsxs)(L,{className:"app-container",children:[Object(n.jsx)(T,{leftScore:h,rightScore:w,onChangeAutoPlay:G,onChangeRevealCards:q}),Object(n.jsx)(S,{autoPlay:_,revealed:V,side:"left",disabled:!!u.card,list:e.current.cardsInDeck,onCardChoose:$}),Object(n.jsx)(P,{leftSide:u,rightSide:m,firstAttack:E,onClear:ee,roundWinner:M}),Object(n.jsx)(S,{autoPlay:!0,side:"right",disabled:!!m.card,list:t.current.cardsInDeck,onCardChoose:$}),Y&&Object(n.jsx)(A,{title:"Game Over",text:re,buttonText:"Restart",onClick:te})]})}var F=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,37)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),r(e),a(e),i(e)}))};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(H,{})}),document.getElementById("root")),F()}],[[34,1,2]]]);
//# sourceMappingURL=main.d004a5a4.chunk.js.map